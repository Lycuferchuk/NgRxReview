<div class="product-details flex p-16">
  @if (isLoading) {
    <app-nxs-skeleton-details></app-nxs-skeleton-details>
  } @else if (noData) {
    <app-nxs-no-data [type]="emptyStateType.NO_DATA"></app-nxs-no-data>
  } @else {
    <mat-card class="nexus-card product-details__card">
      <div class="flex product-details__header gap-32 mb-24">
        <img
          [src]="product.imageUrl"
          [alt]="product.name"
          class="nexus-img product-details__image"
        />

        <div class="flex-col product-details__info gap-8">
          <h1 class="m-0 f-s-28">{{ product.name }}</h1>

          @if (product.rating) {
            <span class="flex product-details__rating f-s-20 gap-4">
              <mat-icon>star</mat-icon>
              {{ product.rating }}/5
            </span>
          }

          <mat-divider class="nexus-divider"></mat-divider>

          @if (product.inStock) {
            <span class="product-details__stock product-details__stock--available f-s-16">
              <mat-icon>check_circle</mat-icon>
              Є в наявності
            </span>
          } @else {
            <span class="product-details__stock product-details__stock--out f-s-16">
              <mat-icon>cancel</mat-icon>
              Немає в наявності
            </span>
          }

          <div class="flex product-details__price-actions gap-16 mt-8">
            <span class="product-details__price f-s-28">{{ product.price | currency }}</span>
            <button
              class="nexus-button"
              mat-flat-button
              color="primary"
              (click)="addToCart()"
              [disabled]="!product.inStock"
            >
              <mat-icon>shopping_cart</mat-icon>
              Купити
            </button>
          </div>
        </div>
      </div>

      <mat-divider></mat-divider>

      <div class="flex-col product-details__body mt-24 gap-24">
        <div class="product-details__section">
          <h2 class="product-details__subtitle f-s-22 mb-12">Опис</h2>
          <p class="product-details__brand f-s-16 mb-8">
            <strong>Бренд:</strong> {{ product.brand }}
          </p>
          <p class="product-details__category f-s-16 mb-8">
            <strong>Категорія:</strong> {{ getCategoryLabel(product.category) }}
          </p>
          @if (product.description) {
            <p class="product-details__description f-s-16 m-0">{{ product.description }}</p>
          }
        </div>

        <mat-divider></mat-divider>

        <div class="product-details__section">
          <h2 class="product-details__subtitle f-s-22 mb-12">Характеристики</h2>
          <div class="product-details__specs">
            @for (spec of getFormattedSpecs(); track spec.key) {
              <div class="product-details__spec-item">
                <span class="product-details__spec-key">{{ spec.label }}</span>
                <span class="product-details__spec-divider"></span>
                <span class="product-details__spec-value">{{ spec.value }}</span>
              </div>
            }
          </div>
        </div>
      </div>
    </mat-card>
  }
</div>
