<div class="product-details">
  @if (isLoading) {
    <mat-spinner class="product-details__spinner"></mat-spinner>
  } @else if (noData) {
    <app-nxs-no-data [type]="emptyStateType.NO_DATA"></app-nxs-no-data>
  } @else {
    <mat-card class="product-details__card">
      <div class="product-details__header">
        <img
          [src]="product.imageUrl"
          [alt]="product.name"
          class="product-details__image"
        />

        <div class="product-details__info">
          <!-- Назва і рейтинг -->
          <h1 class="product-details__name">{{ product.name }}</h1>

          @if (product.rating) {
            <span class="product-details__rating">
              <mat-icon>star</mat-icon>
              {{ product.rating }}/5
            </span>
          }

          <mat-divider class="product-details__divider"></mat-divider>

          @if (product.stock > 0) {
            <span class="product-details__stock">Є в наявності</span>
          } @else {
            <span class="product-details__stock product-details__stock--out">Немає в наявності</span>
          }

          <div class="product-details__price-actions">
            @if (product.discount) {
              <span class="product-details__old-price">{{ product.discountPrice | currency }}</span>
            }
            <span class="product-details__price">{{ product.price | currency }}</span>
            <button
              class="product-details__buy-btn nexus-button"
              mat-flat-button
              color="primary"
              (click)="addToCart()"
              [disabled]="product.stock <= 0"
            >
              <mat-icon>shopping_cart</mat-icon>
              Купити
            </button>
          </div>
        </div>
      </div>

      <mat-divider></mat-divider>

      <div class="product-details__body">
        <h2 class="product-details__subtitle">Опис</h2>
        <p class="product-details__brand">Бренд: {{ product.brand }}</p>
        <p class="product-details__type">Тип: {{ product.type }}</p>
        <p class="product-details__description">{{ product.description }}</p>

        @if (product.features?.length) {
          <h3 class="product-details__features-title">Особливості:</h3>
          <ul class="product-details__features-list">
            @for (feature of product.features; track feature) {
              <li class="product-details__feature-item">{{ feature }}</li>
            }
          </ul>
        }
      </div>
    </mat-card>
  }
</div>
